<!DOCTYPE html>
<meta charset="utf-8">
<body>
	
<svg width='1000' height='1000'></svg>

<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
<script>

var svg = d3.select('svg');

var level = svg.append('g')
  .attr('transform','translate(300,300)'); // center of rotation
  
var rotatingG = level.append('g')
	//.call(d3.drag().on('drag', dragMove));

var maincircle = rotatingG.append('circle')
	.attr('cx', 0)
	.attr('cy', 0)
	.attr('fill', "#fff")
	.attr('stroke', '#000')
	.attr('r', 200);

var secondcircle = rotatingG.append('circle')
	.attr('cx', 0)
	.attr('cy', 0)
	.attr('fill', "#fff")
	.attr('stroke', '#000')
	.attr('r', 165);

var text = rotatingG.append("text")
    .attr("x", 0)
    .attr("y", 183)
    .attr("dy", ".35em")
    .text("A")
    .call(d3.drag()
  	.on('drag', dragRotate)
  	// Set coordinate system to a frame of reference that doesn't move.
	.container(function() { return this.parentNode.parentNode })
  );



var radialLineGenerator = d3.radialLine();

var points = [
  [0, 165],
  [Math.PI / 3, 165],
  [Math.PI * 2 / 3, 165],
  [Math.PI * 5 / 6, 165],
  [Math.PI * 7 / 6, 165],
  [Math.PI * 9 / 6, 165],
  [Math.PI * 11 / 6, 165],
  [Math.PI * 2, 165]
];

var pathData = radialLineGenerator(points);
rotatingG.append('path')
	.attr('d', pathData)
	.attr('stroke', '#999')
	.attr('fill', '#FFF')

/*
var circle = rotatingG.append('circle')
	.attr('cx', 0)
	.attr('cy', 200)
	.attr('r', 10)
	.attr('fill', '#f00')
	.call(d3.drag()
  	.on('drag', dragRotate)
  	// Set coordinate system to a frame of reference that doesn't move.
	.container(function() { return this.parentNode.parentNode })
  );
 */

function dragRotate() {
	var x = d3.event.x, y = d3.event.y, angle;
	if (x >= 0) { angle = 270 - (Math.atan(y / -x) * 180 / Math.PI); } 
	else { angle = 90 + (Math.atan(y / x) * 180 / Math.PI); }
	rotatingG.attr('transform','rotate('+angle+')');
}

function dragMove(d, i) {
	this.x = this.x || 0;
	this.y = this.y || 0;
	this.x += d3.event.dx;
	this.y += d3.event.dy;
	d3.select(this).attr('transform', 'translate(' + Math.round(parseFloat(this.x)) + ',' + Math.round(parseFloat(this.y)) + ')');
}

</script>